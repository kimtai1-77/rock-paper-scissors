<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rps-p1-select</title>
    <link rel="stylesheet" href="../styles.css">
    <script src="../script.js"></script>

    <!--Press start 2P-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Schibsted+Grotesk:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="nav">
        <svg xmlns="http://www.w3.org/2000/svg" height="28px" viewBox="0 -960 960 960" width="28px" fill="#35527a"><path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"/></svg>
    </div>
    <div class="main">
        <div class="player-turn"></div>
        <p><span id="player1Name">Player1Name</span> make your selection:</p>
        <div class="buttons">
            <button data-choice="rock">
                Rock
            </button>
            <button data-choice="paper">
                Paper
            </button>
            <button data-choice="scissors">
                Scissors
            </button>
        </div>    
    </div>

    <script>
        // Read names from query string 
        const params = new URLSearchParams(window.location.search); 
        const player1Name = params.get("player1") || "Player 1"; 
        const player2Name = params.get("player2") || "Player 2";
        
        // Update the display with Player 1's name & turn
        document.querySelector("#player1Name").textContent = player1Name + ","; 
        document.querySelector(".player-turn").textContent = "ðŸ " + player1Name + "'s turn";
        
        //Wire up buttons 
        document.querySelectorAll(".buttons button").forEach(currentItem => {
            currentItem.addEventListener("click", () => { 
                const player1Choice = currentItem.getAttribute("data-choice"); 
                
                // Build query for Player 2 page 
                const nextParams = new URLSearchParams(); 
                nextParams.set("player1", player1Name); 
                nextParams.set("player2", player2Name); 
                nextParams.set("player1Choice", player1Choice);
                
                // Redirect to Player 2 selection page 
                window.location.href = "./player-2-selection.html?" + nextParams.toString();
             });
        });
    </script>
</body>
</html>